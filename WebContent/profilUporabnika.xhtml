<!DOCTYPE html>
<html xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf">

<ui:composition template="WEB-INF/template/template2.xhtml">


	<ui:define name="main">
		<f:view>
			<h2>Profil</h2>
			<h3>Vasi podatki</h3>
			<h:form>

				<b>Ime: </b><h:outputText value="#{profil.oseba.ime}"></h:outputText>
				<br></br>
				<b>Priimek: </b><h:outputText value="#{profil.oseba.priimek}"></h:outputText>
				<br></br>
				<b>Datum rojstva: </b><h:outputText value="#{profil.oseba.izpisiDatumRojstva}"></h:outputText>
				<br></br>
				<b>Datum zaposlitve: </b><h:outputText value="#{profil.oseba.izpisiDatumZaposlitve}"></h:outputText>
				<br></br>
				<b>EMSO: </b><h:outputText value="#{profil.oseba.EMSO}"><f:convertDateTime pattern="dd.MM.yyyy HH:mm:ss" /></h:outputText>
				<br></br>
				<b>Davcna stevilka: </b><h:outputText value="#{profil.oseba.davcnaStevilka}"></h:outputText>
				<br></br>
				<b>Email: </b><h:outputText value="#{profil.oseba.email}"></h:outputText>
				<br></br>
				<b>Geslo: </b><h:outputText value="#{profil.oseba.geslo}"></h:outputText>
				<br></br>
				<b>Spol: </b><h:outputText value="#{profil.oseba.spol}"></h:outputText>
				<br></br>
				<b>Telefonska stevilka: </b><h:outputText value="#{profil.oseba.telefonskaStevilka}"></h:outputText>
				<br></br>
				<b>Oddelek: </b><h:outputText value="#{profil.oseba.oddelek}"></h:outputText>
				<br></br>
				<b>Organizator: </b><h:outputText value="#{profil.oseba.organizatorDogodkov}"></h:outputText>
				<br></br>
				<b>KadrovskaSluzba: </b><h:outputText value="#{profil.oseba.kadrovskaSluzba}"></h:outputText>
				<br></br>
				<b>Vloga:</b> <h:outputText value="#{profil.oseba.vloga}"></h:outputText>
				<br></br>
				<b>Uporabnisko ime:</b> <h:outputText value="#{profil.oseba.uporabniskoIme}"></h:outputText>
				<br></br>
			</h:form>
			<hr />
			<h2>Uredi podatke</h2>
			<h:form>
		
			Email:	<h:inputText id="email" value="#{profil.oseba.email}" validatorMessage="Prosim vnesite email">
					<f:validateRequired />
					<f:validateRegex pattern=".+\@.+\..+" />
				</h:inputText>
				<span class="opozorilo"><h:message for="email"></h:message></span>
				<br />	
				
			Geslo:	<h:inputText id="geslo" value="#{profil.oseba.geslo}" validatorMessage="Prosim vnesite geslo">
					<f:validateRequired />
				</h:inputText>
				<span class="opozorilo"><h:message for="geslo"></h:message></span>
				<br />			
			Telefonska Številka: <h:inputText id="telefonskaStevilka"
					value="#{profil.oseba.telefonskaStevilka}"
					validatorMessage="Prosim vnesite telefonsko številko">
					<f:validateRequired />
				</h:inputText>
				<span class="opozorilo"><h:message for="telefonskaStevilka"></h:message></span>
				<br />
				
			Davčna Številka: <h:inputText id="davcnaStevilka"
					value="#{profil.oseba.davcnaStevilka}"
					validatorMessage="Prosim vnesite davčno številko">
					<f:validateRequired />
				</h:inputText>
				<span class="opozorilo"><h:message for="davcnaStevilka"></h:message></span>
				<br />
				<h:commandButton value="Shrani spremembe" actionListener="#{profil.shraniUrejenoOseno}" />
			</h:form>
			
			<h1>Graf pridobivanja točk</h1>
			<canvas class="graf_mojDogodek" id="graf_tocke"></canvas>
			
			
			<h1>Seznam blokov za točke</h1>
			<h:form>
				<h:dataTable value="#{blok.seznamBlokovOsebe}" var="a">
					<h:column>
						<div>
							<h:outputText class="dogodekVsebina" value="Blok #{a.idBlock}"></h:outputText>

							<div class="gumbPodrobno">
								<input type="button" value="Podrobnosti"
									onclick="toggleDiv(div_#{a.idBlock})"></input>
							</div>
							<div class="skritiDiv" id="div_#{a.idBlock}">
								<span class="dogodekOznake">Hash: </span>
								<h:outputText class="dogodekVsebina" value="#{a.hash}"></h:outputText>
								<br /> <span class="dogodekOznake">Prejsnji hash: </span>
								<h:outputText class="dogodekVsebina" value="#{a.prejsnjiHash}"></h:outputText>
								<br /> <span class="dogodekOznake">Tocke: </span>
								<h:outputText class="dogodekVsebina" value="#{a.stTock}"></h:outputText>
								<br /> <span class="dogodekOznake">Datum: </span>
								<h:outputText class="dogodekVsebina" value="#{a.timeStamp}">
									<f:convertDateTime pattern="dd.MM.yyyy HH:mm:ss" />
								</h:outputText>
								<br />
							</div>
						</div>
						<hr />
					</h:column>
				</h:dataTable>
			</h:form>
			
			
			
			
			<script>

				function toggleDiv(a){
					$( a ).toggle(300);
					
				}

				

				
				var config = {
					type: 'line',
					data: {
						labels: [#{profil.oznake}],
						datasets: [{
							label: 'Točke',
							backgroundColor: [ 
								'rgba(54, 162, 235, 0.2)',
								'rgba(255, 206, 86, 0.2)',
								'rgba(75, 192, 192, 0.2)',
								'rgba(153, 102, 255, 0.2)',
								'rgba(255, 159, 64, 0.2)' ],
							borderColor: [ 
								'rgba(54, 162, 235, 1)',
								'rgba(255, 206, 86, 1)',
								'rgba(75, 192, 192, 1)',
								'rgba(153, 102, 255, 1)',
								'rgba(255, 159, 64, 1)' ],
							data: [#{profil.tocke}
														],
							fill: false,
						}
						
// 						, 
						
// 						{
// 							label: 'My Second dataset',
// 							fill: false,
// 							backgroundColor: window.chartColors.blue,
// 							borderColor: window.chartColors.blue,
// 							data: [
// 								randomScalingFactor(),
// 								randomScalingFactor(),
// 								randomScalingFactor(),
// 								randomScalingFactor(),
// 								randomScalingFactor(),
// 								randomScalingFactor(),
// 								randomScalingFactor()
// 							],
// 						}
]
					},
					options: {
						responsive: true,
						title: {
							display: true,
							text: 'Pridobivanje točk'
						},
						tooltips: {
							mode: 'index',
							intersect: false,
						},
						hover: {
							mode: 'nearest',
							intersect: true
						},
						scales: {
							xAxes: [{
								display: true,
								scaleLabel: {
									display: true,
									labelString: 'Meseci'
								}
							}],
							yAxes: [{
								display: true,
								scaleLabel: {
									display: true,
									labelString: 'Točke'
								}
							}]
						}
					}
				};

			
				var tocke = document.getElementById('graf_tocke').getContext('2d');
				var graf = new Chart(tocke, config);
				

			

		
				

				

				
			
			</script>
		</f:view>
	</ui:define>
</ui:composition>
</html>